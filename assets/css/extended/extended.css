/* =========================================
   1. GLOBAL VARIABLES & RESET
   ========================================= */
:root {
    --nav-width: 200px; /* Mitchell's sidebar is actually quite narrow */
    --content-width: 650px;
    --gap: 60px; /* Space between sidebar and content */
}

html {
    overflow-y: scroll; /* Force scrollbar to prevent layout shift */
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 15px;
    line-height: 1.6;
    background-color: var(--theme) !important;
    color: var(--primary) !important;
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100vh;
}

/* Hide theme-generated text in logo */
.logo a { font-size: 0 !important; }
.logo a span { display: none !important; }
.logo img { display: block !important; width: 40px; height: auto; }

/* =========================================
   2. DESKTOP LAYOUT (Centered - Mitchell Style)
   ========================================= */
@media screen and (min-width: 900px) {
    
    /* THE MAGIC: Turn body into a flex container to center everything */
    body {
        display: flex !important;
        justify-content: center !important;
        align-items: flex-start !important;
        position: relative !important;
    }

    /* 1. SIDEBAR (Left Column) */
    .header {
        position: sticky !important; /* Stays in view but respects centering */
        top: 0 !important;
        width: var(--nav-width) !important;
        height: 100vh !important;
        padding: 60px 0 0 0 !important; /* Top padding matches Main */
        background: transparent !important;
        border: none !important;
        display: flex !important;
        flex-direction: column !important;
        flex-shrink: 0 !important; /* Don't shrink */
        margin-right: var(--gap) !important; /* The gap between sidebar and text */
        left: auto !important; /* Reset fixed positioning */
    }

    /* Logo area */
    .logo {
        margin-bottom: 40px !important; /* Space between Logo and Menu */
        display: block !important;
    }

    /* Navigation Menu */
    .nav { width: 100% !important; }
    #menu {
        display: flex !important;
        flex-direction: column !important;
    }
    #menu li { margin: 6px 0 !important; }
    
    /* 2. MAIN CONTENT (Right Column) */
    .main {
        width: var(--content-width) !important;
        max-width: var(--content-width) !important;
        padding: 60px 0 100px 0 !important; /* Top padding matches Header */
        margin: 0 !important;
        flex-shrink: 0 !important;
    }

    /* Align Title with Logo */
    .main h1, .page-header h1 {
        margin-top: 0 !important;
        line-height: 1.2 !important;
        font-size: 28px !important;
        margin-bottom: 35px !important; /* Pushes text down to align with "About" */
    }

    /* 3. THEME TOGGLE (Top Right of Content) */
    /* We place it absolutely relative to the centered body */
    #theme-toggle {
        position: fixed !important; 
        top: 65px !important; /* Aligns visually with the center of the Logo */
        left: calc(50% + 350px) !important; /* Math: Center + Half Content Width */
        right: auto !important;
        margin: 0 !important;
    }

    /* 4. FOOTER (Pinned to bottom of Sidebar) */
    .footer {
        position: fixed !important;
        bottom: 40px !important;
        /* Calculate left position based on centering */
        /* Since we can't easily calc fixed left in flex, we use sticky logic */
        /* Workaround: Attach it to the sidebar container which is sticky */
        left: calc(50% - 440px) !important; /* Center - (Sidebar + Gap + Half Content) */
        text-align: left !important;
        width: var(--nav-width) !important;
        padding: 0 !important;
        font-size: 12px !important;
        opacity: 0.5;
        background: transparent !important;
        pointer-events: none; /* Lets you click through if needed */
    }
    .footer span { pointer-events: auto; }
}

/* =========================================
   3. MOBILE LAYOUT (Clean Stack)
   ========================================= */
@media screen and (max-width: 899px) {
    body {
        display: block !important;
    }

    .header {
        position: relative !important;
        width: 100% !important;
        height: auto !important;
        padding: 30px 20px 0 20px !important;
        background: var(--theme) !important;
        margin-bottom: 40px !important;
    }

    /* Logo & Toggle Row */
    .logo {
        margin-bottom: 20px !important;
        width: auto !important;
    }
    
    #theme-toggle {
        position: absolute !important;
        top: 35px !important;
        right: 20px !important;
        left: auto !important;
    }

    /* Horizontal Menu */
    .nav { overflow: visible !important; }
    #menu {
        display: flex !important;
        flex-direction: row !important;
        flex-wrap: wrap !important;
        gap: 20px !important;
    }
    #menu li { margin: 0 !important; display: inline-block !important; }

    .main {
        padding: 0 20px 60px 20px !important;
        width: 100% !important;
        max-width: 100% !important;
    }

    .footer {
        position: relative !important;
        text-align: left !important;
        padding: 20px !important;
        width: 100% !important;
        left: auto !important;
        bottom: auto !important;
    }
}

/* Cleanup */
.footer > span:last-child { display: none !important; }
.profile_inner { text-align: left !important; margin: 0 !important; }
.social-icons { justify-content: flex-start !important; }
